# 第三周作业 Weather App

基于外部天气接口调用交互实现的轻量级天气查询APP

作品界面美观大方，较为完美地一一实现了参考图要求的界面样式和设计、完成了要求的功能和目标。

技术方案概要如下。

---

## 1. 项目成果

实现了一个基本功能完善、设计现代美观的 Android 天气应用。
考虑到本节课所教授知识点主要集中于前后端通信与交互，因而此练习项目核心开发目标也集中于了意图构建一个清晰稳健可扩展的前后端数据交互链路。
此外，在实现核心功能的基础上，也尽可能地遵守了谷歌推荐的现代化 Android 开发范式，使用了MVVM等被推荐的项目架构，期望能打造一个具备高性能、优秀用户体验和高可维护性的高质量应用。


---

## 2. 整体技术架构：基于 MVVM 的分层解耦设计

为保证代码的清晰度和可测试性，项目整体采用业界主流的MVVM (Model-View-ViewModel) 架构，并结合仓库模式完成了数据源的抽象。

- View (视图层): 由Activity以及Fragment构成，力图做到相当的轻量化，仅负责 UI 渲染和用户事件的转发，通过 LiveData 订阅ViewModel的数据变更，实现了响应式的UI 更新。
- ViewModel (视图模型): 作为业务逻辑的核心处理单元，它独立于 UI 生命周期。负责调用 Repository获取数据，处理复杂的业务逻辑，并通过LiveData将最终可供展示的数据暴露给view。利用Kotlin 协程 (viewModelScope)优雅地处理异步任务。
- Model (模型层): 由 Repository 及更下层的数据源（网络、本地数据库）构成。Repository 作为唯一的数据入口，对ViewModel  屏蔽了数据的具体来源（不管是来自网络还是本地缓存），实现了数据获取策略的统一管理。
  

---

## 3. 前后端交互（项目核心）

前后端交互是本项目的练习中心，我们构建了一条从用户操作到数据展示的完整、高效的数据流管道。

1. 网络请求层 - Retrofit & OkHttp
  - 选用 Retrofit 作为声明式的HTTP客户端，它能将复杂的API调用过程简化为定义一个Kotlin接口，极大提升了网络层代码的可读性和可维护性。
  - 底层搭配 OkHttp，利用其强大的请求定制能力，例如通过拦截器（Interceptor）统一添加API Key，避免在每个请求中重复编写认证代码。

2. 数据解析与模型分层 - GSON & DTO/Domain Model
  - 服务器返回JSON格式的天气数据。Retrofit和GSON协同工作，自动将JSON解析成我们预先定义好的数据类
3. 异步处理方案 - Kotlin Coroutines
  - 全面采用Kotlin协程作为处理网络请求这类I/O密集型任务的异步解决方案。相比传统的回调，协程能让我们以近似同步的方式编写异步代码，逻辑更清晰，错误处理更简单。
  - 所有数据请求都在 ViewModel 的 viewModelScope 中发起，确保异步任务与 ViewModel 的生命周期绑定，有效避免了内存泄漏。
  - 通过 try-catch 结构，在 try-catch或 ViewModel 层就能轻松捕获和处理网络异常、服务器错误等，实现了集中式的异常处理。
    
4. 架构模式: 精简版 MVVM (Model-View-ViewModel)
  - View (Fragment): 负责展示UI和监听用户操作。它通过LiveData订阅ViewModel的数据。
  - ViewModel: 业务逻辑的核心。它调用数据层获取天气信息，处理加载中、成功、失败等UI状态，并通过LiveData将最终结果暴露给View。所有网络请求都在ViewModel的viewModelScope中启动，确保协程生命周期安全。
  - Model (数据层): 在这个核心练习版中，Model层被简化为直接调用Retrofit Service的网络数据源。我们暂时不引入复杂的仓库模式和本地缓存，以便将注意力完全集中在网络交互上。


---

## 4. 美观的 UI/UX 体验
  - 并不单纯囿于参考示意图的设计，而是加以改造、美观、完善，美化了最终的成品观感。
  - 磨砂玻璃效果 : 通过自定义 Drawable组件为信息卡片实现了现代化的半透明磨砂玻璃效果，增强了界面的层次感和美观度。
  - 渐变背景: 平滑的渐变背景，通过巧妙改善所用色系提升了美观程度与视觉沉浸感。
  - 流畅的页面导航: 采用 ViewPager2 + Fragment 实现了“今日”和“预报”页面的平滑滑动切换，使导航逻辑清晰可控。


---

## 5.总结

本项目不仅是一个功能性的天气 App，更是一个遵循现代 Android 良好实践的技术试。它通过 MVVM、Repository、Coroutines等开发理念与技术的组合，构建了一个健壮、可扩展、易维护的应用架构、实现了从网络请求到响应式 UI 更新的端到端自动化数据流，同时兼顾了美观的UI 特效和完善的功能，作为课后练习来说是一份较为优良的微型项目。